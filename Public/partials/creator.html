<div ng-controller="CreatorCtrl" class="container-fluid">
    <div class="row">
        <div ng-repeat="row in userWidgets" droppable drop="handleDrop(droppedRow, droppedItem, draggedRow)" dragend="cancelDrag()" data-widget-row="{{$index}}" class="grid col-xs-4 col-xs-push-0">
            <div class="row" ng-init="rowNumber = $index">
                <div ng-repeat="item in row track by $index" class="col-xs-12">
                    <div draggable drag="handleDrag()" data-widget-row="{{rowNumber}}" data-widget-index="{{$index}}" ng-class="{'panel panel-primary': !hidePanels}">
                        <div ng-show="!hidePanels" class="panel-heading">
                            {{item.name}}
                        </div>
                        <div ng-class="{'panel-body': !hidePanels}" ng-include="getWidgetView(item)"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="c-row row">
        <div class="col-xs-2 text-left fixed-bottom fixed-left">
            <p><a href="#/" class="btn btn-fab btn-primary btn-raised mdi-action-home"></a></p>
        </div>
        <div class="col-xs-8 col-xs-push-2 fixed-bottom">
            <div ng-show="widgetbar.show" class="widgetbar fade-bottom transition text-center">
                <p ng-repeat="widget in widgets track by $index" draggable drag="handleDrag()" dragend="cancelDrag()" data-widget-index="{{$index}}" class="widget-preview">{{widget.name}}</p>
            </div>
        </div>
        <div class="col-xs-2 text-right fixed-bottom fixed-right">
            <p><button ng-show="dragging" droppable drop="removeWidget(draggedRow, droppedItem)" class="btn btn-fab btn-raised btn-danger transition fade-right"><i class="mdi-action-delete"></i></button></p>
            <p><button ng-click="resetWidgets()" class="btn btn-fab btn-raised btn-danger"><i class="mdi-navigation-cancel"></i></button></p>
            <p><button ng-click="togglePanels()" class="btn btn-fab btn-raised btn-primary"><i ng-class="(!hidePanels)?'mdi-action-tab-unselected':'mdi-action-tab'"></i></button></p>
            <p><button ng-click="showWidgetBar()" class="btn btn-fab btn-raised btn-primary"><i class="mdi-content-add"></i></button></p>
        </div>
    </div>
</div>
